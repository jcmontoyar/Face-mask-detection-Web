(this["webpackJsonpface-mask-detection"]=this["webpackJsonpface-mask-detection"]||[]).push([[0],{279:function(e,t,n){},285:function(e,t){},286:function(e,t){},294:function(e,t){},297:function(e,t){},298:function(e,t){},299:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var r=n(84),c=n.n(r),a=n(232),i=n.n(a),o=(n(279),n(4)),s=n.n(o),u=n(11),d=n(6),l=n(71),f=n(252),h=n.n(f),p=(n(299),n(69)),m=n(301),b=["Correctly placed","Poorly placed","No face mask"];var j=function(){var e=Object(r.useState)("Loading models"),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useRef)(null),i=Object(r.useRef)(null),o=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.e("https://tensorflowrealtimefacemask.s3.us-south.cloud-object-storage.appdomain.cloud/model.json");case 2:return t=e.sent,e.next=5,m.load();case 5:n=e.sent,c(""),setInterval((function(){f(n,t)}),16.7);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,c,o,u,d,f,h,p,m,j,x,g,v,O,w,y,k,S,A,N,R,L;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof a.current||null===a.current||4!==a.current.video.readyState){e.next=16;break}return r=a.current.video,c=a.current.video.videoWidth,o=a.current.video.videoHeight,a.current.video.width=c,a.current.video.height=o,i.current.width=c,i.current.height=o,u=i.current.getContext("2d"),d=l.a.fromPixels(r),!1,e.next=13,t.estimateFaces(d,false);case 13:(f=e.sent).length>0&&f.length<2&&(h=f[0].topLeft,p=f[0].bottomRight,m=[p[0]-h[0],p[1]-h[1]],x=m[1],(j=m[0])>d.shape[1]-h[0]&&(j=d.shape[1]-h[0]),x>d.shape[0]-h[1]&&(x=d.shape[0]-h[1]),g=d.slice([h[1]-30,h[0]],[Math.round(x)+30,Math.round(j)]),v=l.d.resizeBilinear(g,[224,224]).div(l.f(255)),O=l.b(v,"float32"),w=O.expandDims(0),y=n.predict(w).dataSync(),k=y[0],S=y[1],A=y[2],N="red",R="",L=1,k>S&&k>A?(L=k,N="blue",R=b[0]):S>k&&S>A?(L=S,N="yellow",R=b[1]):(L=A,N="red",R=b[2]),requestAnimationFrame((function(){u.strokeStyle=N,u.lineWidth=10,u.fillStyle="white",u.font="40px Arial",u.beginPath(),u.fillText(R+" - "+Math.round(100*L)/100,h[0]-50,h[1]-50),u.rect(h[0],h[1]-30,m[0],m[1]+30),u.stroke()})),l.c(d),l.c(v),l.c(O),l.c(w),l.c(g)),l.c(d);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o()}),[]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(h.a,{ref:a,muted:!0,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:224,height:224}}),Object(p.jsx)("canvas",{ref:i,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:8,width:224,height:224}}),Object(p.jsx)("p",{className:"text-center",children:n})]})};i.a.render(Object(p.jsxs)(c.a.StrictMode,{children:[Object(p.jsx)("div",{className:"header",children:Object(p.jsx)("h1",{className:"text-center",children:"Face mask detection"})}),Object(p.jsx)(j,{})]}),document.getElementById("root"))}},[[302,1,2]]]);
//# sourceMappingURL=main.67857a9a.chunk.js.map